<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>TechX</title>
        <link rel="shortcut icon" href="image/logo2.2-remove.png" type="image/x-icon">
         <!-- Bootstrap File  -->
         <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <link rel="stylesheet" href="css/Create_post.css">
    
    </head>
<body>
   
        <!-- Header start here -->
    <header>
        <div class="row">
            <div class="col">               
                <p>Create Post</p>
            </div>
            <div class="col">
                <a onclick="myfunction()"><img width="50" height="50" id="cross_sign" src="https://img.icons8.com/ios/50/multiply.png" alt="multiply"/></a>
            </div>
        </div>
        </h2>
        </a>
    </header>
    <!-- Header ends here -->
    <hr>
   <!-- main class start start -->
    <main>
        <!-- section start here -->
        <section>
            <textarea name="text" id="content" ></textarea>
        </section>
        <!-- section ends here -->
        <section>
            <div id="img_preview">
                <img src="" id="img_preview_image" >
            </div>
        </section>
    </main>
    <!-- main class ends here -->
    <!-- Footer start here -->
    <footer>
        <div class="addpic">
            <div class="addphoto">
                <input type="file" id='input_file'accept="image/*" hidden multiple>
                <button class="addphoto" onclick="open_file()">
                <svg xmlns="http://www.w3.org/2000/svg" width="70" height="30" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
                    <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                    <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
                </svg><br>
                Photo/Video
            </button>
            </div>
            <div class="addcamera">
                    <button class="addcamera">                    
                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="40" fill="currentColor" class="bi bi-camera-fill" viewBox="0 0 16 16">
                    <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
                    <path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/>
                    </svg><br>
                    Camera
            </button>
            </div>
        </div>
        <div class="post_content">
            <button id="upload" onclick="uploadImage()">Post</button>
        </div>

    </footer>
    <!-- Footer section ends here -->
    <!-- script tag start here -->
    <script src="JavaScript/Create_post.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.1.0/firebase-storage.js"></script>
<!-- Script for data upload in firebase storage -->
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDzuQMqCSk21coM76TukGRWnxr2_Tqf4tw",
      authDomain: "techx-project.firebaseapp.com",
      projectId: "techx-project",
      storageBucket: "techx-project.appspot.com",
      messagingSenderId: "941951611823",
      appId: "1:941951611823:web:d7441a1f7a9610d5a8355a",
      measurementId: "G-BSE9VLMKCR"
    };
   // Initialize Firebase
   const app = initializeApp(firebaseConfig);
   console.log(app);
   
   function uploadImage() {
      const ref = app.storage().ref();
      const file = document.querySelector("#input_file").files[0];
      const name = +new Date() + "-" + file.name;
      const metadata = {
         contentType: file.type
      };
      const task = ref.child(name).put(file, metadata);task
      .then(snapshot => snapshot.ref.getDownloadURL())
      .then(url => {
      console.log(url);
      alert('image uploaded successfully');
      document.querySelector("#image").src = url;
   })
   .catch(console.error);
   const errorMsgElement = document.querySelector('span#errorMsg');
   }
  
   
  </script>
</body>
</html>